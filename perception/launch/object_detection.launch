<!--
  Author: Mahimana Bhatt
  Email: mbhatt@wpi.edu

  Team Capricorn
  NASA SPACE ROBOTICS CHALLENGE -->

<launch>
    <arg name="robot_name" default="small_scout_1" />
    <arg name="rviz" default="true" />
    <arg name="launch_stereo_proc" default="true" />
    <arg name="path_to_model" default='$(find perception)/model' /> 
    <arg name="path_to_labelmap" default='$(find perception)/model/saved_model.pbtxt' /> 

    <arg name="namespace" value="/$(arg robot_name)/camera" />

    <node if="$(arg launch_stereo_proc)" pkg="stereo_image_proc" ns="$(arg namespace)" output="log" type="stereo_image_proc" name="stereo_image_proc" />	
    <node name="$(arg robot_name)_object_detection" pkg="perception" type="object_detection_cap.py" output="log" args="$(arg robot_name) $(arg path_to_model) $(arg path_to_labelmap)" />

    <!-- <node name="processing_plant_cheat_odom" pkg="maploc" type="publish_cheat_odom" output="screen" args="processing_plant" />
    <node name="repair_station_cheat_odom" pkg="maploc" type="publish_cheat_odom" output="screen" args="repair_station" />
    <node name="excavator_cheat_odom" pkg="maploc" type="publish_cheat_odom" output="screen" args="small_excavator_1" />
    <node name="hauler_cheat_odom" pkg="maploc" type="publish_cheat_odom" output="screen" args="small_hauler_1" />
    <node name="small_scout_1_cheat_odom" pkg="maploc" type="publish_cheat_odom" output="screen" args="$(arg robot_name)" /> -->

    <node name="object_localization" pkg="perception" type="object_localization.py" output="screen" args="$(arg robot_name)" />

    <node if="$(arg rviz)" pkg="rviz" type="rviz" name="rviz" args="-d $(find utils)/rviz/object_detection.rviz"/>
</launch>